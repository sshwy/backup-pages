<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta name="keywords" content=""><meta name="description" content="Sshwy 的个人博客"><meta name="generator" content="Hexo 6.3.0"><title>IOI2020 国家集训队作业小结 2 - Sshwy&#39;s Notes</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/ssimple.css?20250423.css"><link rel="stylesheet" href="/iconfont/iconfont.css?20250423.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" crossorigin="anonymous"></script><script>document.addEventListener("DOMContentLoaded",function(){window.renderKatex()})</script></head><body><header><div class="header" style="width:100%"><div class="header-inner" style="position:fixed;z-index:20;top:0;left:0"><div class="header-content" style="max-width:1200px;margin:auto"><div class="blog-title"><span class="iconfont icon-menu1" id="menu-button"></span> <a href="/" class="logo header-title">Sshwy&#39;s Notes</a><div class="mobile-search"><input type="text"> <span class="iconfont icon-search mobile-search-icon"></span> <span class="iconfont icon-baseline-close-px search-close-icon"></span></div></div><div class="navbar" id="menu-list"><ul class="menu"><li class="menu-item"><a href="/archives/" class="menu-item-link"><span class="menu-item-icon iconfont icon-work"></span> Archives</a></li><li class="menu-item"><a href="/directory/" class="menu-item-link"><span class="menu-item-icon iconfont icon-folder-close"></span> Directory</a></li><li class="menu-item"><a href="/about/" class="menu-item-link"><span class="menu-item-icon iconfont icon-user"></span> About</a></li><li class="menu-item"><a href="/static/beibishi2023" class="menu-item-link"><span class="menu-item-icon iconfont icon-favorite"></span> NOI 背笔试</a></li></ul></div><div class="search"><input type="text"> <span class="iconfont icon-search search-icon"></span> <span class="iconfont icon-baseline-close-px search-close-icon"></span></div></div></div><div class="search-shadow"></div><div class="search-box"><div class="search-container"><div class="search-container-inner"><div class="search-data-status"><span>Fetching search data...</span></div><div class="search-count"></div><div class="search-result"></div></div></div></div></div></header><main class="main"><article class="post"><div class="post-title"><h1 class="page-title">IOI2020 国家集训队作业小结 2</h1></div><div class="post-meta"><div class="post-info"><span class="post-info-item post-time" title="2019年11月29日星期五上午11点09分 (CST+08:00)"><span class="info-icon iconfont icon-time"></span>更新于 2019年11月29日 </span><span class="icon infosep"></span><span class="post-info-item post-wordcount"> <span class="info-icon iconfont icon-text"></span>约 2,360 字</span></div><div class="post-directory"><span class="iconfont icon-folder-close"></span> <a class="directory" href="/directory">Home</a> <a class="directory" href="/directory/"></a> <span class="icon smallarrow"></span> <a class="directory" href="/directory/IOI2020hw/">2020 国家集训队作业 </a><span class="icon smallarrow"></span> 当前文章</div><hr></div><div class="toc"><h2 class="toc-title"><span class="iconfont icon-explain" style="font-size:1em;padding-right:5px"></span>文章目录</h2><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#AGC025-D-Choosing-Points"><span class="toc-number">1.</span> <span class="toc-text">AGC025 D Choosing Points</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AGC024-F-Simple-Subsequence-Problem"><span class="toc-number">2.</span> <span class="toc-text">AGC024 F Simple Subsequence Problem</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AGC026-D-Histogram-Coloring"><span class="toc-number">3.</span> <span class="toc-text">AGC026 D Histogram Coloring</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AGC026-E-Synchronized-Subsequence"><span class="toc-number">4.</span> <span class="toc-text">AGC026 E Synchronized Subsequence</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AGC025-E-Walking-on-a-Tree"><span class="toc-number">5.</span> <span class="toc-text">AGC025 E Walking on a Tree</span></a></li></ol></div><hr></div><div class="post-content"><p>AGC 的题</p><h2><a id="AGC025-D-Choosing-Points" href="#AGC025-D-Choosing-Points" class="headerlink" title="AGC025 D Choosing Points"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc025/tasks/agc025_d">AGC025 D Choosing Points</a></h2><p>对于一个<script type="math/tex">d</script>，我们把距离为<script type="math/tex">\sqrt{d}</script>的点连边。考虑证明这是一个二分图。</p><p>如果<script type="math/tex">d</script>是奇数，那么显然，做一个黑白染色即可。</p><p>如果<script type="math/tex">d</script>是偶数，就把图旋转 45 度，变成两个错开的图，把单位设为<script type="math/tex">\sqrt{2}</script>，即把距离除以<script type="math/tex">\sqrt{2}</script>。那么相当于<script type="math/tex">d</script>除以 2。由于这两个错开的图互不相关（因为两个图之间的点距离为奇数），因此递归下去直到<script type="math/tex">d</script>为奇数，就完成了证明。</p><p>那么我们对每个点开一个 pair，分别记录两个距离下的颜色。根据抽屉原理，一定存在一个 pair 的出现次数大于<script type="math/tex">n^2</script>。那么就求出答案了。</p><p>时间复杂度<script type="math/tex">O(n^2)</script>。</p><p><a target="_blank" rel="noopener" href="https://gitee.com/sshwy/code/raw/master/atcoder/agc025_d.cpp">代码</a></p><h2><a id="AGC024-F-Simple-Subsequence-Problem" href="#AGC024-F-Simple-Subsequence-Problem" class="headerlink" title="AGC024 F Simple Subsequence Problem"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc024/tasks/agc024_f">AGC024 F Simple Subsequence Problem</a></h2><p>定义标记<script type="math/tex">[s]</script>表示<script type="math/tex">s</script>的子序列集合。考虑构建一个子序列自动机。设二元组状态<script type="math/tex">(s,t)</script>表示<script type="math/tex">s[t]</script>，那么我们找到<script type="math/tex">t</script>中 0 和 1 第一次出现的位置，可以贪心地转移到<script type="math/tex">s0[t_0]</script>和<script type="math/tex">s1[t_1]</script>。其中<script type="math/tex">t_1</script>和<script type="math/tex">t_2</script>分别是<script type="math/tex">t</script>去掉第一个 0 的前缀、去掉第一个 1 的前缀得到的字符串。这样建出来的是一个 DAG。</p><p>于是我们设<script type="math/tex">f(i,j,k)</script>表示长度为<script type="math/tex">i</script>的字符串<script type="math/tex">j</script>，以第<script type="math/tex">k</script>位为分界，右边是中括号的走到这个状态的方案数。显然，把所有<script type="math/tex">x\in S,[x]</script>的 DP 值设成 1，然后在 DAG 上转移一下，那么就可以得到<script type="math/tex">s</script>是多少个串的子序列了，即<script type="math/tex">s[\varnothing]</script>的 DP 值。</p><p>时间复杂度<script type="math/tex">O(n2^n)</script>。</p><p><a target="_blank" rel="noopener" href="https://gitee.com/sshwy/code/raw/master/atcoder/agc024_f.cpp">代码</a></p><h2><a id="AGC026-D-Histogram-Coloring" href="#AGC026-D-Histogram-Coloring" class="headerlink" title="AGC026 D Histogram Coloring"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc026/tasks/agc026_d">AGC026 D Histogram Coloring</a></h2><p>注意到，如果第一列里有两个相邻同色方格，那么第二列之后的一定只有一种填色方法。而如果第一列是红蓝交错，那么第二列就有两种填色方法，之后同理。</p><p>因此我们考虑一个类似删行的思路。设<script type="math/tex">f_0(l,r,h),f_1(l,r,h)</script>表示只考虑区间<script type="math/tex">[l,r]</script>的高度大于等于<script type="math/tex">h</script>的部分（即把高度减掉<script type="math/tex">h-1</script>），填色的方案数。<script type="math/tex">f_0</script>表示无限制，而<script type="math/tex">f_1</script>表示最底下的一行必须红蓝交错。</p><p>转移的时候枚举第一列下两行的方格是否同色，那么可以得到</p><script type="math/tex;mode=display">f_0(l,r,h)=2f_1(l,r,h+2)+f_0(l,r,h+1)\\
f_1(l,r,h)=2f_1(l,r,h+2)+f_1(l,r,h+1)</script><p>在边界情况（比如第一列的高度为 1）的时候可以缩短区间的长度，如果中间的有一个高度为 1 的，那么分两边求，然后乘起来即可。</p><p>由于不同的高度差只有<script type="math/tex">O(n^2)</script>种，因此对于高度相同的一段可以矩乘优化。这样就做完了，但是难写。</p><p>另一个做法是考虑横着做。设<script type="math/tex">f(i,j)</script>表示考虑前<script type="math/tex">i</script>列，其中后<script type="math/tex">j</script>列的最底下一行是一段极长的红蓝交错段，这样的方案数。</p><p>转移的时候，考虑<script type="math/tex">[i-j+1,i]</script>内有几个完整的以<script type="math/tex">i</script>结尾的极长段，假设有<script type="math/tex">c(i-j+1,i)</script>个。</p><p>每一段都有两种填色方案，因此有<script type="math/tex">f(i,j)=f(i-1,j-1)c(i-j+1,i)</script>。</p><p>另一方面，考虑<script type="math/tex">j=1</script>的情况。这时<script type="math/tex">i</script>和<script type="math/tex">i-1</script>同色，由于<script type="math/tex">i</script>上面部分的颜色我们还未确定，因此我们强制<script type="math/tex">i,i-1</script>同色后可以直接枚举<script type="math/tex">f(i-1,j),j\in[1,i-1]</script>的和，再乘上<script type="math/tex">c(i,i)</script>来转移。</p><p>时间复杂度<script type="math/tex">O(n^2\log_2h)</script>，<script type="math/tex">c(i,j)</script>可以预处理。</p><p><a target="_blank" rel="noopener" href="https://gitee.com/sshwy/code/raw/master/atcoder/agc026_d.cpp">代码</a></p><h2><a id="AGC026-E-Synchronized-Subsequence" href="#AGC026-E-Synchronized-Subsequence" class="headerlink" title="AGC026 E Synchronized Subsequence"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc026/tasks/agc026_e">AGC026 E Synchronized Subsequence</a></h2><p>我们考虑将序列分成若干个 a,b 个数相等的段。对每一段分别考虑。</p><p>如果这一段的第一个字符是 a，那么我们可以贪心地选择最长的形如<code class="inline-code">ababab</code>的串。</p><p>如果第一个字符是 b，那么假设我们选了一对 (b,a)，那么我们选择这一对 ba 的下一对一定不会变劣。因此我们枚举一个后缀 pair 的方案，取字典序最大即可。</p><p>对于每一段的最优解，显然我们是要么选要么不选。因此倒着取最优即可。</p><p>时间复杂度<script type="math/tex">O(n^2)</script>。</p><p><a target="_blank" rel="noopener" href="https://gitee.com/sshwy/code/raw/master/atcoder/agc026_e.cpp">代码</a></p><h2><a id="AGC025-E-Walking-on-a-Tree" href="#AGC025-E-Walking-on-a-Tree" class="headerlink" title="AGC025 E Walking on a Tree"></a><a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc025/tasks/agc025_e">AGC025 E Walking on a Tree</a></h2><p>首先猜结论：限制都可以达到。</p><p>考虑我们用归纳法证明这个结论。对于一个叶子结点<script type="math/tex">u</script>，如果经过它的边数小于 2，我们显然可以直接删掉这个点。因为它的贡献一定是 1。如果有大于等于 2 条边经过它，那我们就随便选两条边，假设为<script type="math/tex">(x,u),(y,u)</script>，那么我们把<script type="math/tex">(x,u),(y,u)</script>删掉，加入一个<script type="math/tex">(x,y)</script>进去，把路径交上的限制都减 2，然后删掉这个 u 即可。这样我们就归约到了一个更小的问题。因此根据数学归纳法，就证明了这个结论。</p><p>难点在于方案的构造。思考可以发现，上述过程实际上是规定了这两条边的方向状态。两条边中要改变一条的方向，或者说两条边要么都不改变，要么同时改变。因此我们想办法这些规定建成一个图，然后做一个类似染色的事情即可。</p><p>具体地，我们类似删叶子的过程，我们在 DFS 的过程中先建立子树的规定，然后考虑当前 u 的父边的限制。如果限制小于 2 就不用管了。否则我们需要找到两条不冲突的边来规定状态。</p><p>如果是子树延伸上的两条边，我们显然可以选。因对于这组边，为我们建立的规定始终是一样的，不会冲突。</p><p>否则，我们可以选择两个不同子树的边。两个不同子树的边是互不相关的，因此也可以选。</p><p>选完了就规定一下状态，然后记录一下当前结点有没有选，选了哪两条边，然后回溯即可。</p><p>时间复杂度<script type="math/tex">O(nm)</script>。</p><p><a target="_blank" rel="noopener" href="https://gitee.com/sshwy/code/raw/master/atcoder/agc025_e.cpp">代码</a></p></div><hr><h3><span class="iconfont icon-history" style="padding-right:5px;font-size:1em"></span>修订记录</h3><div class="post-history-list"><ol reversed><li class="post-history-item">2019年11月29日 创建文章</li></ol></div><div class="post-footer"><hr><div class="next-post"><span class="iconfont icon-arrow-left-circle"></span> <a href="/Math/Mobius-prob/">莫比乌斯反演 - 进阶</a></div><div class="prev-post"><a href="/IOI2020hw/AGC-part-3/">IOI2020 国家集训队作业小结 3 </a><span class="iconfont icon-arrow-right-circle"></span></div></div></article></main></body><div class="side-button"><div id="comment-button" class="button" title="Valine Comment"><span class="iconfont icon-comment"></span></div><div id="darkmode-button" class="button" title="Switch between day and night"><span class="iconfont icon-moonbyueliang"></span></div><div id="top" class="button" title="Back to top"><span class="iconfont icon-arrowup"></span></div></div><footer id="footer" style="margin:3em 0 2em 0;text-align:center;line-height:1.4em"><span class="post-wordcount iconfont icon-text"></span> 全站约 404,069 字<div class="license" style="padding:0 10px"><span>本站所有文章遵循许可协议 <a target="_blank" rel="license noreferrer noopener" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a></span></div><div class="credit"><span>Themed <a href="https://github.com/sshwy/hexo-theme-essence" target="_blank" rel="noreferrer noopener">Essence v1.9.11</a> | Powered by <a href="http://hexo.io" target="_blank" rel="noreferrer noopener">Hexo</a></span></div><div class="friends"><span class="friend-link-span">友情链接 </span><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://carol-xrl.github.io/"><span class="friend-link-span">Carol </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/GavinZheng"><span class="friend-link-span">GavinZheng </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/xryjr233"><span class="friend-link-span">xryjr233 </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/dysyn1314"><span class="friend-link-span" title="为什么我的头常常变绿？因为…… "><span style="font-weight:700"><span class="codeforces p">dy</span><span class="codeforces m">syn</span><span class="codeforces p">1314</span></span> </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://blog.aor.sd.cn"><span class="friend-link-span">RainAir </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/lcyfrog"><span class="friend-link-span">lcyfrog </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/maoyiting"><span class="friend-link-span">/hanx/se</span></a></div><div class="copyright"><span>Copyright &copy; 2019-present - Sshwy</span></div></footer><script src="/js/ssimple.js?20250423.js"></script><script src="https://pv.sohu.com/cityjson?ie=utf-8.js" defer></script></html>
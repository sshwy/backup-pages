<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta name="keywords" content=""><meta name="description" content="Sshwy 的个人博客"><meta name="generator" content="Hexo 6.3.0"><title>小技巧 - Sshwy&#39;s Notes</title><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/ssimple.css?20250423.css"><link rel="stylesheet" href="/iconfont/iconfont.css?20250423.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" crossorigin="anonymous"></script><script>document.addEventListener("DOMContentLoaded",function(){window.renderKatex()})</script></head><body><header><div class="header" style="width:100%"><div class="header-inner" style="position:fixed;z-index:20;top:0;left:0"><div class="header-content" style="max-width:1200px;margin:auto"><div class="blog-title"><span class="iconfont icon-menu1" id="menu-button"></span> <a href="/" class="logo header-title">Sshwy&#39;s Notes</a><div class="mobile-search"><input type="text"> <span class="iconfont icon-search mobile-search-icon"></span> <span class="iconfont icon-baseline-close-px search-close-icon"></span></div></div><div class="navbar" id="menu-list"><ul class="menu"><li class="menu-item"><a href="/archives/" class="menu-item-link"><span class="menu-item-icon iconfont icon-work"></span> Archives</a></li><li class="menu-item"><a href="/directory/" class="menu-item-link"><span class="menu-item-icon iconfont icon-folder-close"></span> Directory</a></li><li class="menu-item"><a href="/about/" class="menu-item-link"><span class="menu-item-icon iconfont icon-user"></span> About</a></li><li class="menu-item"><a href="/static/beibishi2023" class="menu-item-link"><span class="menu-item-icon iconfont icon-favorite"></span> NOI 背笔试</a></li></ul></div><div class="search"><input type="text"> <span class="iconfont icon-search search-icon"></span> <span class="iconfont icon-baseline-close-px search-close-icon"></span></div></div></div><div class="search-shadow"></div><div class="search-box"><div class="search-container"><div class="search-container-inner"><div class="search-data-status"><span>Fetching search data...</span></div><div class="search-count"></div><div class="search-result"></div></div></div></div></div></header><main class="main"><article class="post"><div class="post-title"><h1 class="page-title">小技巧</h1></div><div class="post-meta"><div class="post-info"><span class="post-info-item post-time" title="2022年11月7日星期一晚上11点28分 (CST+08:00)"><span class="info-icon iconfont icon-time"></span>更新于 2022年11月7日 </span><span class="icon infosep"></span><span class="post-info-item post-wordcount"> <span class="info-icon iconfont icon-text"></span>约 3,556 字</span></div><div class="post-directory"><span class="iconfont icon-folder-close"></span> <a class="directory" href="/directory">Home</a> <a class="directory" href="/directory/"></a> <span class="icon smallarrow"></span> 当前文章</div><hr></div><div class="toc"><h2 class="toc-title"><span class="iconfont icon-explain" style="font-size:1em;padding-right:5px"></span>文章目录</h2><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#差比数列"><span class="toc-number">1.</span> <span class="toc-text">差比数列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#拉格朗日插值"><span class="toc-number">2.</span> <span class="toc-text">拉格朗日插值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#取值连续"><span class="toc-number">2.1.</span> <span class="toc-text">取值连续</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#欧拉回路"><span class="toc-number">3.</span> <span class="toc-text">欧拉回路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DFS-及其应用"><span class="toc-number">4.</span> <span class="toc-text">DFS 及其应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#连通分量的应用"><span class="toc-number">5.</span> <span class="toc-text">连通分量的应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#abs-与-fabs"><span class="toc-number">6.</span> <span class="toc-text">abs 与 fabs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#维护连续段"><span class="toc-number">7.</span> <span class="toc-text">维护连续段</span></a></li></ol></div><hr></div><div class="post-content"><h2><a id="差比数列" href="#差比数列" class="headerlink" title="差比数列"></a>差比数列</h2><p>不知为什么想要补一下这个。</p><p>一个等差数列<script type="math/tex">a_n=a+(n-1)d</script>，等比数列<script type="math/tex">q_n=bq^{n-1}</script>，则差比数列<script type="math/tex">c_n=a_n\cdot q_n</script>.</p><script type="math/tex;mode=display">c_n=[a+(n-1)d]bq^{n-1}</script><p>差别数列求和，使用裂项法，公式为</p><script type="math/tex;mode=display">S_n=\sum_{i=1}^nc_n=\frac{[a+(n-1)d]bq^n}{q-1}-\frac{ab}{q-1}-\frac{dbq(q^{n-1}-1)}{(q-1)^2}</script><h2><a id="拉格朗日插值" href="#拉格朗日插值" class="headerlink" title="拉格朗日插值"></a>拉格朗日插值</h2><p>2019.6.29</p><p>对于一个 n 次多项式，可以由 n+1 个点唯一确定：<script type="math/tex">(x_0,y_0),(x_1,y_1),\cdots,(x_n,y_n)</script>.</p><p>现在我们想要求这个表达式在某个位置的值。</p><p>构造一个多项式</p><script type="math/tex;mode=display">l_j(x)=\prod_{i=0,i\neq j}^k\frac{x-x_i}{x_j-x_i}</script><p>它被成为拉格朗日基本多项式。也称插值基函数。这个表达式有什么特点？</p><script type="math/tex;mode=display">\begin{aligned}
l_j(x_j)&=\prod_{i=0,i\neq j}^k\frac{x_j-x_i}{x_j-x_i}=1\\
l_j(x_i)&=\cdots\times \frac{x_i-x_i}{x_j-x_i}\times\cdots=0
\end{aligned}</script><p>于是可以构造这样一个多项式</p><script type="math/tex;mode=display">L(x)=\sum_{i=0}^kl_i(x)y_i</script><p>它显然经过了<script type="math/tex">(x_0,y_0),(x_1,y_1),\cdots,(x_n,y_n)</script>。于是代入一个点即可得到对应位置上的值。</p><p>化简后可以得到这个多项式的系数表示法。</p><h3><a id="取值连续" href="#取值连续" class="headerlink" title="取值连续"></a>取值连续</h3><p>我们考虑一种特殊的情况，当<script type="math/tex">x_i=i</script>时，我们得到</p><script type="math/tex;mode=display">l_j(x)=\prod _{i=0,i\neq j}^k\frac{x-i}{j-i}=\frac{F_{j-1}G_{j+1}}{j!(k-j)!(-1)^{(k-j)}}</script><p>其中<script type="math/tex">F_j=\prod_{i=0}^j(x-i),G_j=\prod_{i=j}^k(x-i)</script>。于是得到的多项式为</p><script type="math/tex;mode=display">L(x)=\sum_{i=0}^k\frac{y_iF_{i-1}G_{i+1}}{i!(k-i)!(-1)^{(k-i)}}</script><p>预处理<script type="math/tex">F,G</script>可以<script type="math/tex">O(n)</script>求<script type="math/tex">L(x)</script>。</p><h2><a id="欧拉回路" href="#欧拉回路" class="headerlink" title="欧拉回路"></a>欧拉回路</h2><p>欧拉回路指一个图中经过所有边的回路。分有向图欧拉回路和无向图欧拉回路两种。求欧拉回路可以直接采用 DFS 的方法。我们首先沿着路径不停地搜索，途中可能会掠过一些环，但我们不担心。因为我们是在回溯的时候记录路径，而回溯的时候会遍历这些没有走过的环。因此不会走漏。在搜索时可以更改前向星的头指针来剪枝。对于无向图的情况，需要记录每一条无向边（一条无向边在存的时候相当于两条有向边）是否访问过。</p><p>UOJ117</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;algorithm></span><span class="token comment">/*&#123;&#123;&#123;*/</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cctype></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cassert></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cmath></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstdio></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstring></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;cstdlib></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;ctime></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;map></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;set></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> lld<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">double</span> lf<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> uld<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">></span> pii<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">fi</span> <span class="token expression">first</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">se</span> <span class="token expression">second</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">pb</span> <span class="token expression">push_back</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">mk</span> <span class="token expression">make_pair</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">FOR</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ROF</span><span class="token expression"><span class="token punctuation">(</span>i<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">>=</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span>i<span class="token punctuation">)</span></span><span class="token comment">/*&#125;&#125;&#125;*/</span></span>
<span class="token comment">/******************heading******************/</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> M<span class="token operator">=</span><span class="token number">1e6</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">,</span>N<span class="token operator">=</span><span class="token number">1e6</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> t<span class="token punctuation">,</span>n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>
<span class="token keyword">int</span> a<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">,</span>la<span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">qxx</span><span class="token punctuation">&#123;</span><span class="token keyword">int</span> nex<span class="token punctuation">,</span>t<span class="token punctuation">,</span>v<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
qxx e<span class="token punctuation">[</span>M<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> h<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>le<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">add_path</span><span class="token punctuation">(</span><span class="token keyword">int</span> f<span class="token punctuation">,</span><span class="token keyword">int</span> t<span class="token punctuation">,</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>e<span class="token punctuation">[</span><span class="token operator">++</span>le<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>qxx<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>h<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">,</span>v<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token operator">=</span>le<span class="token punctuation">;</span><span class="token punctuation">&#125;</span>

<span class="token keyword">bool</span> vis<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> d1<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>d2<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>i<span class="token punctuation">;</span>i<span class="token operator">=</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&amp;&amp;</span>vis<span class="token punctuation">[</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>i<span class="token operator">=</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nex<span class="token punctuation">;</span>
        h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token keyword">int</span> v<span class="token operator">=</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t<span class="token punctuation">,</span>w<span class="token operator">=</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>vis<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token operator">++</span>la<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">?</span>w<span class="token operator">:</span><span class="token punctuation">(</span>t<span class="token operator">==</span><span class="token number">2</span><span class="token operator">?</span>w<span class="token operator">:</span><span class="token operator">-</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>t<span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">,</span><span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> u1<span class="token punctuation">,</span>v1<span class="token punctuation">;</span>
    <span class="token function">FOR</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>m<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>u1<span class="token punctuation">,</span><span class="token operator">&amp;</span>v1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add_path</span><span class="token punctuation">(</span>u1<span class="token punctuation">,</span>v1<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token function">add_path</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span>u1<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d1<span class="token punctuation">[</span>u1<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">,</span>d2<span class="token punctuation">[</span>v1<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">FOR</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token punctuation">(</span>d2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span>t<span class="token operator">==</span><span class="token number">2</span><span class="token operator">&amp;&amp;</span>d1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">!=</span>d2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"NO"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>la<span class="token operator">&lt;</span>m<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"NO"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"YES"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">ROF</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>la<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>欧拉回路有一些经典的应用</p><blockquote><p>对于一个无向图，将其中的每一条边定向，要求每个结点的入度和出度的差不超过 1。</p></blockquote><p>首先找到图中所有的奇点，将他们连向一个虚点 s。由于奇点的个数一定是偶数个，因此连完后整个图是欧拉图，跑一遍欧拉回路可以定向。然后再删掉 s 以及连接 s 的边，点的度最多变化 1。</p><blockquote><p>平面上 n 个整点<script type="math/tex">(x,y)</script>，要求将他们染成红色或者蓝色，且每行每列红蓝点个数差不超过 1。</p></blockquote><p>把<script type="math/tex">(x,y)</script>当作<script type="math/tex">x,y</script>之间连一条无向边，则染红色蓝色相当与给无向边定向，转化为上一题的模型。</p><blockquote><p>生成长度为<script type="math/tex">2^n</script>的首位相接的串使得所有长度为<script type="math/tex">n</script>的 01 串都出现过。</p></blockquote><p>这道题其实有两种转化模型的方式。对于一个串，你可以在后面加一个 0/1 然后删除首个字符得到下一个串，因此一个串连向两个串。问题转化为寻找哈密尔顿回路问题，貌似不太可做。</p><p>另一种转化方式是，把一个形如<code class="inline-code">abcd</code>的串拆成 (<code class="inline-code">abc</code>,<code class="inline-code">bcd</code>) 的边。这样建出来的图是可能有自环的，然后我们在这个有向图上跑欧拉回路就行了。</p><blockquote><p>给一个无向图（不一定连通）加边使之成为一个欧拉图。</p></blockquote><p>首先处理每一个连通块。对于有奇点的连通块们显然可以连一个大环搞掉两个奇点，剩下的奇点随便匹配就行。</p><p>然后就考虑剩下若干个没有奇点的连通块，那么我们也连一个大环就行了。</p><p><img src="https://hexo-source-1257756441.cos.ap-chengdu.myqcloud.com/2019/07/13/151325.png" alt="p1"></p><p>在遇到一些和欧拉回路有关的问题的时候，有时是不需要建图的，直接搞度数 ；混合图求欧拉回路需要用网络流；欧拉回路只和每个点的奇偶性有关；出一道欧拉回路的好题非常难。</p><h2><a id="DFS-及其应用" href="#DFS-及其应用" class="headerlink" title="DFS 及其应用"></a>DFS 及其应用</h2><p>手写栈模拟 DFS：相当于把状态丢到结构体里，手动开栈，跑一个 while 循环。搜索相当于圧栈。状态不仅仅包括函数参数，还有递归结构内的一些变量的值，比如循环变量 i 的值。同时还有递归、回溯的状态之分（总之先<del>口糊</del>一波，以后再补）</p><p>有一些图论构造题，可以在一棵 DFS 生成树上构造而忽略非树边。这常用在证明中，也有显示的构造。</p><p>一个无向图的 DFS 生成树，每一条非树边对应一个简单环。这个可以应用在仙人掌判定上。即把每个环的结点做标记，最后判断每条树边是否只覆盖一次。</p><h2><a id="连通分量的应用" href="#连通分量的应用" class="headerlink" title="连通分量的应用"></a>连通分量的应用</h2><p>强连通分量容易让人想到缩点 DP；边双连通分量缩点后构成一棵树，称作边双树；对于点双连通分量，一个点可能在多个点双中出现。</p><h2><a id="abs-与-fabs" href="#abs-与-fabs" class="headerlink" title="abs 与 fabs"></a>abs 与 fabs</h2><p><code class="inline-code">abs</code> 是憨批。如果不 <code class="inline-code">using namespace std</code> 直接调用 abs 可能调用的是 <code class="inline-code">int abs(int)</code>。使用 <code class="inline-code">fabs</code> 是最保险的。</p><h2><a id="维护连续段" href="#维护连续段" class="headerlink" title="维护连续段"></a>维护连续段</h2><p>今天写了一个感觉很妙的 set 维护连续段的代码，感觉很简洁：</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">struct</span> <span class="token class-name">Interval</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">int</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> w<span class="token punctuation">,</span> t<span class="token punctuation">;</span> <span class="token comment">// a[l..r] = w, assigned time</span>
  <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>Interval a<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> l <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>l<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
set<span class="token operator">&lt;</span>Interval<span class="token operator">></span> s<span class="token punctuation">;</span>
 
<span class="token keyword">void</span> <span class="token function">mergeInterval</span><span class="token punctuation">(</span>Op cur<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// [cur.l, cur.r] 是我们要合并的区间</span>
  <span class="token keyword">auto</span> st <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">upper_bound</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>cur<span class="token punctuation">.</span>l<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 因为 l 是 struct 里第一个参数所以这里可以这么写</span>
  <span class="token operator">--</span>st<span class="token punctuation">;</span>
  <span class="token keyword">auto</span> ed <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">upper_bound</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>cur<span class="token punctuation">.</span>r<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vector<span class="token operator">&lt;</span>Interval<span class="token operator">></span> <span class="token function">v</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> ed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿出所有与之相交的区间</span>
  s<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> ed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">auto</span> <span class="token operator">&amp;</span> vst <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span> ved <span class="token operator">=</span> v<span class="token punctuation">[</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>vst<span class="token punctuation">.</span>l <span class="token operator">&lt;</span> cur<span class="token punctuation">.</span>l<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 把不在 [cur.l, cur.r] 里的区间塞回去</span>
    s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>vst<span class="token punctuation">.</span>l<span class="token punctuation">,</span> cur<span class="token punctuation">.</span>l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> vst<span class="token punctuation">.</span>w<span class="token punctuation">,</span> vst<span class="token punctuation">.</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vst<span class="token punctuation">.</span>l <span class="token operator">=</span> cur<span class="token punctuation">.</span>l<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>r <span class="token operator">&lt;</span> ved<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 把不在 [cur.l, cur.r] 里的区间塞回去</span>
    s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>cur<span class="token punctuation">.</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> ved<span class="token punctuation">.</span>r<span class="token punctuation">,</span> ved<span class="token punctuation">.</span>w<span class="token punctuation">,</span> ved<span class="token punctuation">.</span>t<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ved<span class="token punctuation">.</span>r <span class="token operator">=</span> cur<span class="token punctuation">.</span>r<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">:</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 处理被删掉的区间</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> qs<span class="token punctuation">[</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>i<span class="token punctuation">.</span>l<span class="token punctuation">,</span> i<span class="token punctuation">.</span>r<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>w<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>t <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> qs<span class="token punctuation">[</span>i<span class="token punctuation">.</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>i<span class="token punctuation">.</span>l<span class="token punctuation">,</span> i<span class="token punctuation">.</span>r<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">.</span>w<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  s<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>cur<span class="token punctuation">.</span>l<span class="token punctuation">,</span> cur<span class="token punctuation">.</span>r<span class="token punctuation">,</span> cur<span class="token punctuation">.</span>w<span class="token punctuation">,</span> t<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 插入 [cur.l, cur.r]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><hr><h3><span class="iconfont icon-history" style="padding-right:5px;font-size:1em"></span>修订记录</h3><div class="post-history-list"><ol reversed><li class="post-history-item">2022年11月7日 第8次修订</li><li class="post-history-item">2022年11月7日 第7次修订</li><li class="post-history-item">2021年7月10日 第6次修订</li><li class="post-history-item">2021年6月28日 第5次修订</li><li class="post-history-item">2021年6月22日 第4次修订</li><li class="post-history-item">2021年3月27日 第3次修订</li><li class="post-history-item">2021年3月10日 第2次修订</li><li class="post-history-item">2020年2月28日 创建文章</li></ol></div><div class="post-footer"><hr><div class="next-post"><span class="iconfont icon-arrow-left-circle"></span> <a href="/Graph/Connected-components-algorithm/">连通分量相关算法</a></div><div class="prev-post"><a href="/String/PAM/">回文自动机小结 </a><span class="iconfont icon-arrow-right-circle"></span></div></div></article></main></body><div class="side-button"><div id="comment-button" class="button" title="Valine Comment"><span class="iconfont icon-comment"></span></div><div id="darkmode-button" class="button" title="Switch between day and night"><span class="iconfont icon-moonbyueliang"></span></div><div id="top" class="button" title="Back to top"><span class="iconfont icon-arrowup"></span></div></div><footer id="footer" style="margin:3em 0 2em 0;text-align:center;line-height:1.4em"><span class="post-wordcount iconfont icon-text"></span> 全站约 404,069 字<div class="license" style="padding:0 10px"><span>本站所有文章遵循许可协议 <a target="_blank" rel="license noreferrer noopener" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a></span></div><div class="credit"><span>Themed <a href="https://github.com/sshwy/hexo-theme-essence" target="_blank" rel="noreferrer noopener">Essence v1.9.11</a> | Powered by <a href="http://hexo.io" target="_blank" rel="noreferrer noopener">Hexo</a></span></div><div class="friends"><span class="friend-link-span">友情链接 </span><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://carol-xrl.github.io/"><span class="friend-link-span">Carol </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/GavinZheng"><span class="friend-link-span">GavinZheng </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/xryjr233"><span class="friend-link-span">xryjr233 </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/dysyn1314"><span class="friend-link-span" title="为什么我的头常常变绿？因为…… "><span style="font-weight:700"><span class="codeforces p">dy</span><span class="codeforces m">syn</span><span class="codeforces p">1314</span></span> </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://blog.aor.sd.cn"><span class="friend-link-span">RainAir </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/lcyfrog"><span class="friend-link-span">lcyfrog </span></a><span class="icon friendsep"></span> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/maoyiting"><span class="friend-link-span">/hanx/se</span></a></div><div class="copyright"><span>Copyright &copy; 2019-present - Sshwy</span></div></footer><script src="/js/ssimple.js?20250423.js"></script><script src="https://pv.sohu.com/cityjson?ie=utf-8.js" defer></script></html>